<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Server Information</title>
    <style>
        /* Add some basic styling if needed */
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            color: white;
            background-color: #212121;
        }

        h2 {
            color: white;
        }

        h3 {
            text-align: center;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        textarea,
        input {
            width: 100%; /* Adjusted to full width */
            padding: 8px;
            margin-bottom: 10px;
            box-sizing: border-box;
            border: 1px solid #444; /* Dark border */
            background-color: #333; /* Dark background */
            color: white;
        }

        /* Set the SPF DOMAIN and DOMAIN inputs to be in the same column */
        #subdomain,
        #spfdomain {
            /* Adjusted to full width */
            box-sizing: border-box;
            margin-bottom: 10px;
        }

        /* Center the button */
        button {
            padding: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }

        button:hover {
            background-color: #45a049;
        }

        table {
            border-collapse: collapse;
            width: 100%;
            margin-top: 10px;
            color: white;
        }

        th, td {
            border: 1px solid #444; /* Dark border */
            padding: 8px;
            text-align: left;
        }

        th {
            background-color: #555; /* Dark background */
        }

        tr:nth-child(even) {
            background-color: #444; /* Dark background */
        }

        tr:nth-child(odd) {
            background-color: #333; /* Dark background */
        }

        .pushable {
            position: relative;
            background: transparent;
            margin: 10px;
            padding: 0px;
            border: none;
            cursor: pointer;
            outline-offset: 4px;
            outline-color: deeppink;
            transition: filter 250ms;
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
        }

        .shadow {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 100%;
            background: hsl(0, 0%, 11%);
            border-radius: 8px;
            filter: blur(2px);
            will-change: transform;
            transform: translateY(2px);
            transition: transform 600ms cubic-bezier(0.3, 0.7, 0.4, 1);
        }

        .edge {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 100%;
            border-radius: 8px;
            background: linear-gradient(to right,
                    hsl(210, 64%, 60%) 0%,
                    hsl(210, 100%, 63%) 8%,
                    hsl(210, 64%, 60%) 92%,
                    hsl(210, 64%, 50%) 100%);
        }

        .front {
            display: block;
            position: relative;
            border-radius: 8px;
            background: #2196F3;
            padding: 16px 32px;
            color: white;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen,
                Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            font-size: 1rem;
            transform: translateY(-4px);
            transition: transform 600ms cubic-bezier(0.3, 0.7, 0.4, 1);
        }

        .pushable:hover {
            filter: brightness(110%);
        }

        .pushable:hover .front {
            transform: translateY(-6px);
            transition: transform 250ms cubic-bezier(0.3, 0.7, 0.4, 1.5);
        }

        .pushable:active .front {
            transform: translateY(-2px);
            transition: transform 34ms;
        }

        .pushable:hover .shadow {
            transform: translateY(4px);
            transition: transform 250ms cubic-bezier(0.3, 0.7, 0.4, 1.5);
        }

        .pushable:active .shadow {
            transform: translateY(1px);
            transition: transform 34ms;
        }

        .pushable:focus:not(:focus-visible) {
            outline: none;
        }

        #res {
            display: none;
        }

        input,
        textarea,
        select {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            box-sizing: border-box;
            border: 1px #2196F3 solid;
            border-radius: 4px;
            background-color: #2c2c2c;
            color: white;
        }

        input,
        textarea,
        select:active {
            outline: none;
        }

        .coolinput {
            display: flex;
            flex-direction: column;
            width: fit-content;
            position: static;
            width: 50%;
        }

        .coolinput label.text {
            font-size: 0.75rem;
            color: #2196F3;
            font-weight: 700;
            position: relative;
            top: 0.5rem;
            margin: 0 0 0 7px;
            padding: 0 3px;
            background: #2c2c2c;
            width: fit-content;
        }

        .coolinput input[type=text].input {
            padding: 11px 10px;
            font-size: 0.75rem;
            color: white;
            border: 1px #2196F3 solid;
            border-radius: 5px;
            background: #2d2d2d;
        }

        .coolinput input[type=text].input:focus {
            outline: none;
        }

        .coolinput textarea:focus {
            outline: none;
        }

        .coolinput textarea {
            padding: 11px 10px;
            font-size: 0.75rem;
            color: white;
            border: 1px #2196F3 solid;
            border-radius: 5px;
            background: #2c2c2c;
            resize: none;
            height: 100px;
        }
    </style>
</head>

<body>

    <h2>Servers Information</h2>

    <div class="coolinput">
        <label for="serverInfo" class="text">Enter Server ID and Domains:</label>
        <textarea id="serverInfo" rows="4" placeholder="abs2266 To-Keep hostmaster@tradications.bid kongja.grimmation.jp.net 195.154.39.145 &#10;
abs2266	To-Keep	hostmaster@tradications.bid grimmation.jp.net 195.154.39.123 &#10;
abs2266	To-Keep	hostmaster@tradications.bid formistances.jp.net	195.154.32.212 &#10;
" name="input"
            class="input"></textarea>
    </div>

    <div class="coolinput">
        <label for="subdomain" class="text">Subdomain:</label>
        <input type="text" id="subdomain" placeholder="Alias.." name="input" class="input">
    </div>

    <div class="coolinput">
        <label for="spfdomain" class="text">SPF DOMAIN:</label>
        <textarea id="spfdomain" rows="4" placeholder="euros.uk.net.." name="input"
            class="input"></textarea>
    </div>

    <button onclick="addServers()" class="pushable">
        <span class="shadow"></span>
        <span class="edge"></span>
        <span class="front">
            GENERATE
        </span>
    </button>

    <div id="res">
        <h3>Servers List:</h3>
        <table id="serverTable">
            <thead>
                <tr>
                    <th>Server ID</th>
                    <th>Return-Path</th>
                    <th>SPF Record</th>
                </tr>
            </thead>
            <tbody id="serverList"></tbody>
        </table>
    </div>

   <script>
    function addServers() {
        // Get input values
        var serverInfo = document.getElementById('serverInfo').value;
        var spfDomainsTextarea = document.getElementById('spfdomain');
        var subdomain = document.getElementById('subdomain').value;

        // Validate input
        if (!serverInfo || !spfDomainsTextarea || !subdomain) {
            alert('Please enter Server IDs, Domains, SPF domains, and subdomain.');
            return;
        }

        // Split input into lines
        var lines = serverInfo.split('\n');

        // Get SPF domains from the textarea and remove empty and duplicate lines
        var spfDomains = spfDomainsTextarea.value
            .split('\n')
            .map(function (domain) {
                return domain.trim();
            })
            .filter(function (domain, index, self) {
                return domain !== '' && self.indexOf(domain) === index;
            });

        // Create an object to store server ID and corresponding domains
        var serverDomainsMap = {};

        // Process each line
        lines.forEach(function (line) {
            // Split line into server ID and domain
            var [serverId, , , domain] = line.split(/\s+/); // Extract only the relevant parts

            // Validate server ID and domain
            if (serverId && domain) {
                // Add domain to the server ID entry in the map
                if (!serverDomainsMap[serverId]) {
                    serverDomainsMap[serverId] = [];
                }
                serverDomainsMap[serverId].push(domain);
            }
        });

        // Clear textarea
       // document.getElementById('serverInfo').value = '';

        // Display server ID and corresponding domains in the table
        var serverList = document.getElementById('serverList');
        serverList.innerHTML = ''; // Clear existing table body

        // Initialize a counter for subdomains
        var subdomainCounter = 0;

        // Process each SPF domain
        spfDomains.forEach(function (spfDomain, index) {
            // Create table header for each SPF domain
            var headerRow = document.createElement('tr');
            headerRow.innerHTML = `<th colspan="3">${spfDomain}</th>`;
            headerRow.innerHTML = `<th colspan="3" style="height:25px;"> </th>`;
            serverList.appendChild(headerRow);

            // Process each server ID
            for (var serverId in serverDomainsMap) {
                // Increment the subdomain counter
                subdomainCounter++;

                // Create table row
                var tableRow = document.createElement('tr');

                // Create and append server ID cell
                var serverIdCell = document.createElement('td');
                serverIdCell.textContent = serverId;
                tableRow.appendChild(serverIdCell);

                // Create and append Return-Path cell
                var returnPathCell = document.createElement('td');
                returnPathCell.textContent = `${subdomain}${subdomainCounter}.${spfDomain}`;
                tableRow.appendChild(returnPathCell);

                // Create and append SPF record cell
                var spfRecordCell = document.createElement('td');
                spfRecordCell.textContent = `,v=spf1 ${serverDomainsMap[serverId].map(domain => `a:${domain}`).join(' ')} -all`;
                tableRow.appendChild(spfRecordCell);

                // Append the row to the table
                serverList.appendChild(tableRow);
            }
        });

        document.getElementById('res').style.display = "block";
    }
</script>


</body>

</html>
